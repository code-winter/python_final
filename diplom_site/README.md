## Бэкенд сервиса

### Установка:
* Клонировать репозиторий
* Создать .env со следующими ключами: 
  * SECRET_KEY - секретный ключ Django,
  * DEBUG_FLAG - True или False, отвечает за режим разработки Django,
  * DB_ENGINE - тип БД (желательно PostgreSQL)
  * DB_NAME
  * DB_HOST
  * DB_PORT
  * DB_USER
  * DB_PASSWORD
* Поместить .env в папку /diplom_site/
* Установить requirements.txt
* Прогнать миграции
* Создать суперпользователя
* Запустить сервер

### Работа:

Реализована система токенов для авторизации пользователей, токены доступны после создания пользователей
по отдельному эндпоинту. Токены можно заменить по API, также можно изменить пароль пользователя. Почти все
View-функции закрыты для неавторизованных пользователей. 

#### Эндпоинты:
* _/get_token/_ - создает токен для пользователя. Только для авторизованных пользователей. Структура запроса:  
**POST {
    "username": "username",
    "password": "password"
}**
* _/refresh_token/_ - изменяет прикрепленный токен. Только для авторизованных пользователей. Структура запроса:  
**POST {
    "username": "username",
    "password": "password"
}**
* _/register/_ - регистрация пользователей. Структура запроса:  
**POST {
    "password": "password",
    "username": "username",
    "first_name": "first name",
    "last_name": "last name",
    "email": "email@domain.com"
    }**
* _/user/_ - изменение полей пользователя. Только для текущего авторизованного пользователя. Возможно частичное изменение.
* _/partner_update/_ - эндпоинт для загрузки .yaml-файлов с данными магазинов
* _/products/_ - выведение всех товаров. Только GET-запросы.
* _/products/details/_ - подробная информация конкретного товара. Только для авторизованных пользователей.
Структура запроса:  
**GET{
    "id": 1
}**
* _/products/order/_ - создание заказа. Только для авторизованных пользователей. Структура запроса:  
**POST {
    "contact": {
        "city": "str"
    },
    "quantity": int,
    "product_info": pk
}**
* **/orders/confirm/** - подтверждение заказа. Только для авторизованных пользователей. Структура запроса:  
**POST {
    "id": pk,
    "address": "str",
    "phone": "str"
}**
* _/orders/_ - список заказов пользователя. Только для текущего авторизованного пользователя.
Структура запроса:   
**GET {
    "id": pk
}**
* _/orders/info/_ - детали конкретного заказа. Только для текущего авторизованного пользователя.
Структура запроса:   
**GET {
    "id": pk
}**